<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âë®ÊúüÂêàÁ∫¶ÁÆ°ÁêÜ - Crypto Platform</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/index.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f7fa; }
        .layout-container { height: 100vh; display: flex; flex-direction: column; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header-title { font-size: 20px; font-weight: 600; }
        .content { flex: 1; padding: 20px; overflow-y: auto; }
        .search-form { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .table-container { background: white; border-radius: 8px; padding: 20px; }
    </style>
</head>
<body>
    <div id="app" class="layout-container">
        <div class="header">
            <div class="header-title">üìä Âë®ÊúüÂêàÁ∫¶ÁÆ°ÁêÜ</div>
            <div>
                <el-button type="primary" size="small" @click="goBack">ËøîÂõû‰∏ªÈ°µ</el-button>
                <el-button type="danger" size="small" @click="logout">ÈÄÄÂá∫ÁôªÂΩï</el-button>
            </div>
        </div>

        <div class="content">
            <!-- ÊêúÁ¥¢Ë°®Âçï -->
            <div class="search-form">
                <el-form :inline="true" :model="searchForm">
                    <el-form-item label="ËÆ¢ÂçïÂè∑">
                        <el-input v-model="searchForm.orderNo" placeholder="ËØ∑ËæìÂÖ•ËÆ¢ÂçïÂè∑" clearable></el-input>
                    </el-form-item>
                    <el-form-item label="Áî®Êà∑ID">
                        <el-input v-model="searchForm.userId" placeholder="ËØ∑ËæìÂÖ•Áî®Êà∑ID" clearable></el-input>
                    </el-form-item>
                    <el-form-item label="‰∫§ÊòìÂØπ">
                        <el-select v-model="searchForm.tradingPair" placeholder="ËØ∑ÈÄâÊã©‰∫§ÊòìÂØπ" clearable>
                            <el-option label="BTC/USDT" value="BTC/USDT"></el-option>
                            <el-option label="ETH/USDT" value="ETH/USDT"></el-option>
                            <el-option label="BNB/USDT" value="BNB/USDT"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="‰∫§ÊòìÁ±ªÂûã">
                        <el-select v-model="searchForm.orderType" placeholder="ËØ∑ÈÄâÊã©‰∫§ÊòìÁ±ªÂûã" clearable>
                            <el-option label="‰π∞ÂÖ•" value="1"></el-option>
                            <el-option label="ÂçñÂá∫" value="2"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item label="ËÆ¢ÂçïÁä∂ÊÄÅ">
                        <el-select v-model="searchForm.status" placeholder="ËØ∑ÈÄâÊã©Áä∂ÊÄÅ" clearable>
                            <el-option label="ÂæÖÊàê‰∫§" value="0"></el-option>
                            <el-option label="ÈÉ®ÂàÜÊàê‰∫§" value="1"></el-option>
                            <el-option label="ÂÆåÂÖ®Êàê‰∫§" value="2"></el-option>
                            <el-option label="Â∑≤ÂèñÊ∂à" value="3"></el-option>
                        </el-select>
                    </el-form-item>
                    <el-form-item>
                        <el-button type="primary" @click="handleSearch">Êü•ËØ¢</el-button>
                        <el-button @click="handleReset">ÈáçÁΩÆ</el-button>
                    </el-form-item>
                </el-form>
            </div>

            <!-- Êï∞ÊçÆË°®Ê†º -->
            <div class="table-container">
                <el-table :data="tableData" border stripe v-loading="loading">
                    <el-table-column prop="id" label="ID" width="80"></el-table-column>
                    <el-table-column prop="orderNo" label="ËÆ¢ÂçïÂè∑" width="180"></el-table-column>
                    <el-table-column prop="userId" label="Áî®Êà∑ID" width="100"></el-table-column>
                    <el-table-column prop="tradingPair" label="‰∫§ÊòìÂØπ" width="120"></el-table-column>
                    <el-table-column prop="orderType" label="‰∫§ÊòìÁ±ªÂûã" width="100">
                        <template #default="scope">
                            <el-tag :type="scope.row.orderType === 1 ? 'success' : 'danger'">
                                {{ scope.row.orderType === 1 ? '‰π∞ÂÖ•' : 'ÂçñÂá∫' }}
                            </el-tag>
                        </template>
                    </el-table-column>
                    <el-table-column prop="price" label="‰ª∑Ê†º" width="120"></el-table-column>
                    <el-table-column prop="amount" label="Êï∞Èáè" width="120"></el-table-column>
                    <el-table-column prop="totalAmount" label="ÊÄªÈáëÈ¢ù" width="120"></el-table-column>
                    <el-table-column prop="filledAmount" label="Â∑≤Êàê‰∫§Êï∞Èáè" width="120"></el-table-column>
                    <el-table-column prop="status" label="Áä∂ÊÄÅ" width="100">
                        <template #default="scope">
                            <el-tag :type="getStatusType(scope.row.status)">
                                {{ getStatusText(scope.row.status) }}
                            </el-tag>
                        </template>
                    </el-table-column>
                    <el-table-column prop="createTime" label="ÂàõÂª∫Êó∂Èó¥" width="180"></el-table-column>
                    <el-table-column label="Êìç‰Ωú" width="200" fixed="right">
                        <template #default="scope">
                            <el-button size="small" @click="handleView(scope.row)">ËØ¶ÊÉÖ</el-button>
                            <el-button size="small" type="danger" @click="handleCancel(scope.row)" 
                                       v-if="scope.row.status === 0 || scope.row.status === 1">Êí§Âçï</el-button>
                        </template>
                    </el-table-column>
                </el-table>

                <el-pagination
                    v-model:current-page="pagination.page"
                    v-model:page-size="pagination.size"
                    :total="pagination.total"
                    :page-sizes="[10, 20, 50, 100]"
                    layout="total, sizes, prev, pager, next, jumper"
                    @size-change="handleSizeChange"
                    @current-change="handleCurrentChange"
                    style="margin-top: 20px; justify-content: flex-end;">
                </el-pagination>
            </div>
        </div>

        <!-- ËØ¶ÊÉÖÂØπËØùÊ°Ü -->
        <el-dialog v-model="detailVisible" title="ËÆ¢ÂçïËØ¶ÊÉÖ" width="600px">
            <el-descriptions :column="2" border v-if="currentRow">
                <el-descriptions-item label="ËÆ¢ÂçïÂè∑">{{ currentRow.orderNo }}</el-descriptions-item>
                <el-descriptions-item label="Áî®Êà∑ID">{{ currentRow.userId }}</el-descriptions-item>
                <el-descriptions-item label="‰∫§ÊòìÂØπ">{{ currentRow.tradingPair }}</el-descriptions-item>
                <el-descriptions-item label="‰∫§ÊòìÁ±ªÂûã">
                    <el-tag :type="currentRow.orderType === 1 ? 'success' : 'danger'">
                        {{ currentRow.orderType === 1 ? '‰π∞ÂÖ•' : 'ÂçñÂá∫' }}
                    </el-tag>
                </el-descriptions-item>
                <el-descriptions-item label="‰ª∑Ê†º">{{ currentRow.price }}</el-descriptions-item>
                <el-descriptions-item label="Êï∞Èáè">{{ currentRow.amount }}</el-descriptions-item>
                <el-descriptions-item label="ÊÄªÈáëÈ¢ù">{{ currentRow.totalAmount }}</el-descriptions-item>
                <el-descriptions-item label="Â∑≤Êàê‰∫§Êï∞Èáè">{{ currentRow.filledAmount }}</el-descriptions-item>
                <el-descriptions-item label="ÊâãÁª≠Ë¥π">{{ currentRow.fee }}</el-descriptions-item>
                <el-descriptions-item label="Áä∂ÊÄÅ">
                    <el-tag :type="getStatusType(currentRow.status)">
                        {{ getStatusText(currentRow.status) }}
                    </el-tag>
                </el-descriptions-item>
                <el-descriptions-item label="ÂàõÂª∫Êó∂Èó¥" :span="2">{{ currentRow.createTime }}</el-descriptions-item>
                <el-descriptions-item label="Êõ¥Êñ∞Êó∂Èó¥" :span="2">{{ currentRow.updateTime }}</el-descriptions-item>
            </el-descriptions>
        </el-dialog>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/index.full.js"></script>
    <script>
        const { createApp, ref, reactive, onMounted } = Vue;

        
        createApp({
            setup() {
                const loading = ref(false);
                const detailVisible = ref(false);
                const currentRow = ref(null);
                
                const searchForm = reactive({
                    orderNo: '',
                    userId: '',
                    tradingPair: '',
                    orderType: '',
                    status: ''
                });
                
                const pagination = reactive({
                    page: 1,
                    size: 10,
                    total: 0
                });
                
                const tableData = ref([]);
                
                // Ê®°ÊãüÊï∞ÊçÆ
                const mockData = [
                    { id: 1, orderNo: 'CYCLE202512300001', userId: 1001, tradingPair: 'BTC/USDT', orderType: 1, price: '42,500.00', amount: '0.5', totalAmount: '21,250.00', filledAmount: '0.5', fee: '21.25', status: 2, createTime: '2025-12-30 10:30:00', updateTime: '2025-12-30 10:30:15' },
                    { id: 2, orderNo: 'CYCLE202512300002', userId: 1002, tradingPair: 'ETH/USDT', orderType: 2, price: '2,250.00', amount: '2.0', totalAmount: '4,500.00', filledAmount: '1.0', fee: '4.50', status: 1, createTime: '2025-12-30 11:15:00', updateTime: '2025-12-30 11:20:00' },
                    { id: 3, orderNo: 'CYCLE202512300003', userId: 1003, tradingPair: 'BNB/USDT', orderType: 1, price: '310.00', amount: '10.0', totalAmount: '3,100.00', filledAmount: '0.0', fee: '0.00', status: 0, createTime: '2025-12-30 12:00:00', updateTime: '2025-12-30 12:00:00' },
                    { id: 4, orderNo: 'CYCLE202512300004', userId: 1004, tradingPair: 'BTC/USDT', orderType: 2, price: '42,800.00', amount: '0.3', totalAmount: '12,840.00', filledAmount: '0.0', fee: '0.00', status: 3, createTime: '2025-12-30 13:30:00', updateTime: '2025-12-30 13:35:00' },
                    { id: 5, orderNo: 'CYCLE202512300005', userId: 1005, tradingPair: 'ETH/USDT', orderType: 1, price: '2,260.00', amount: '5.0', totalAmount: '11,300.00', filledAmount: '5.0', fee: '11.30', status: 2, createTime: '2025-12-30 14:00:00', updateTime: '2025-12-30 14:00:30' }
                ];
                
                const loadData = () => {
                    loading.value = true;
                    setTimeout(() => {
                        tableData.value = mockData;
                        pagination.total = mockData.length;
                        loading.value = false;
                    }, 500);
                };
                
                const handleSearch = () => { loadData(); };
                const handleReset = () => {
                    Object.keys(searchForm).forEach(key => searchForm[key] = '');
                    loadData();
                };
                const handleSizeChange = (size) => { pagination.size = size; loadData(); };
                const handleCurrentChange = (page) => { pagination.page = page; loadData(); };
                const handleView = (row) => { currentRow.value = row; detailVisible.value = true; };
                const handleCancel = (row) => {
                    ElementPlus.ElMessageBox.confirm('Á°ÆÂÆöË¶ÅÊí§ÈîÄËØ•ËÆ¢ÂçïÂêóÔºü', 'ÊèêÁ§∫', {
                        confirmButtonText: 'Á°ÆÂÆö', cancelButtonText: 'ÂèñÊ∂à', type: 'warning'
                    }).then(() => {
                        ElementPlus.ElMessage.success('Êí§ÂçïÊàêÂäü');
                        loadData();
                    }).catch(() => {});
                };
                const getStatusType = (status) => {
                    const types = { 0: 'info', 1: 'warning', 2: 'success', 3: 'danger' };
                    return types[status] || 'info';
                };
                const getStatusText = (status) => {
                    const texts = { 0: 'ÂæÖÊàê‰∫§', 1: 'ÈÉ®ÂàÜÊàê‰∫§', 2: 'ÂÆåÂÖ®Êàê‰∫§', 3: 'Â∑≤ÂèñÊ∂à' };
                    return texts[status] || 'Êú™Áü•';
                };
                const goBack = () => { window.location.href = 'dashboard.html'; };
                const logout = () => {
                    localStorage.removeItem('token');
                    localStorage.removeItem('userInfo');
                    window.location.href = 'login.html';
                };
                
                onMounted(() => { loadData(); });
                
                return {
                    loading, detailVisible, currentRow, searchForm, pagination, tableData,
                    handleSearch, handleReset, handleSizeChange, handleCurrentChange,
                    handleView, handleCancel, getStatusType, getStatusText, goBack, logout
                };
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>
