<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å€Ÿè´·é…ç½®ç®¡ç† - Crypto Platform</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/index.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f5f7fa; }
        .layout-container { height: 100vh; display: flex; flex-direction: column; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; height: 60px; display: flex; align-items: center; justify-content: space-between; padding: 0 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header-title { font-size: 20px; font-weight: 600; }
        .content { flex: 1; padding: 20px; overflow-y: auto; }
        .toolbar { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .table-container { background: white; border-radius: 8px; padding: 20px; }
    </style>
</head>
<body>
    <div id="app" class="layout-container">
        <div class="header">
            <div class="header-title">ğŸ’° å€Ÿè´·é…ç½®ç®¡ç†</div>
            <div>
                <el-button type="primary" size="small" @click="goBack">è¿”å›ä¸»é¡µ</el-button>
                <el-button type="danger" size="small" @click="logout">é€€å‡ºç™»å½•</el-button>
            </div>
        </div>

        <div class="content">
            <!-- å·¥å…·æ  -->
            <div class="toolbar">
                <el-button type="primary" @click="handleAdd">æ–°å¢å€Ÿè´·</el-button>
            </div>

            <!-- æ•°æ®è¡¨æ ¼ -->
            <div class="table-container">
                <el-table :data="tableData" border stripe v-loading="loading">
                    <el-table-column prop="id" label="ID" width="80"></el-table-column>
                    <el-table-column prop="productName" label="å€Ÿè´·åç§°" width="200"></el-table-column>
                    <el-table-column prop="currency" label="å¸ç§" width="100"></el-table-column>
                    <el-table-column prop="minAmount" label="æœ€å°é‡‘é¢" width="120"></el-table-column>
                    <el-table-column prop="maxAmount" label="æœ€å¤§é‡‘é¢" width="120"></el-table-column>
                    <el-table-column prop="annualRate" label="å¹´åŒ–æ”¶ç›Šç‡" width="120">
                        <template #default="scope">{{ scope.row.annualRate }}%</template>
                    </el-table-column>
                    <el-table-column prop="lockDays" label="é”å®šå¤©æ•°" width="100"></el-table-column>
                    <el-table-column prop="totalQuota" label="æ€»é¢åº¦" width="150"></el-table-column>
                    <el-table-column prop="remainQuota" label="å‰©ä½™é¢åº¦" width="150"></el-table-column>
                    <el-table-column prop="status" label="çŠ¶æ€" width="100">
                        <template #default="scope">
                            <el-tag :type="scope.row.status === 1 ? 'success' : 'danger'">
                                {{ scope.row.status === 1 ? 'å¯ç”¨' : 'ç¦ç”¨' }}
                            </el-tag>
                        </template>
                    </el-table-column>
                    <el-table-column label="æ“ä½œ" width="250" fixed="right">
                        <template #default="scope">
                            <el-button size="small" @click="handleEdit(scope.row)">ç¼–è¾‘</el-button>
                            <el-button size="small" type="warning" @click="handleToggleStatus(scope.row)">
                                {{ scope.row.status === 1 ? 'ç¦ç”¨' : 'å¯ç”¨' }}
                            </el-button>
                            <el-button size="small" type="danger" @click="handleDelete(scope.row)">åˆ é™¤</el-button>
                        </template>
                    </el-table-column>
                </el-table>

                <el-pagination
                    v-model:current-page="pagination.page"
                    v-model:page-size="pagination.size"
                    :total="pagination.total"
                    :page-sizes="[10, 20, 50, 100]"
                    layout="total, sizes, prev, pager, next, jumper"
                    @size-change="handleSizeChange"
                    @current-change="handleCurrentChange"
                    style="margin-top: 20px; justify-content: flex-end;">
                </el-pagination>
            </div>
        </div>

        <!-- ç¼–è¾‘å¯¹è¯æ¡† -->
        <el-dialog v-model="dialogVisible" :title="dialogTitle" width="600px">
            <el-form :model="formData" label-width="120px">
                <el-form-item label="å€Ÿè´·åç§°">
                    <el-input v-model="formData.productName" placeholder="è¯·è¾“å…¥å€Ÿè´·åç§°"></el-input>
                </el-form-item>
                <el-form-item label="å¸ç§">
                    <el-select v-model="formData.currency" placeholder="è¯·é€‰æ‹©å¸ç§">
                        <el-option label="USDT" value="USDT"></el-option>
                        <el-option label="BTC" value="BTC"></el-option>
                        <el-option label="ETH" value="ETH"></el-option>
                    </el-select>
                </el-form-item>
                <el-form-item label="æœ€å°é‡‘é¢">
                    <el-input v-model="formData.minAmount" placeholder="è¯·è¾“å…¥æœ€å°é‡‘é¢"></el-input>
                </el-form-item>
                <el-form-item label="æœ€å¤§é‡‘é¢">
                    <el-input v-model="formData.maxAmount" placeholder="è¯·è¾“å…¥æœ€å¤§é‡‘é¢"></el-input>
                </el-form-item>
                <el-form-item label="å¹´åŒ–æ”¶ç›Šç‡(%)">
                    <el-input v-model="formData.annualRate" placeholder="è¯·è¾“å…¥å¹´åŒ–æ”¶ç›Šç‡"></el-input>
                </el-form-item>
                <el-form-item label="é”å®šå¤©æ•°">
                    <el-input v-model="formData.lockDays" placeholder="è¯·è¾“å…¥é”å®šå¤©æ•°"></el-input>
                </el-form-item>
                <el-form-item label="æ€»é¢åº¦">
                    <el-input v-model="formData.totalQuota" placeholder="è¯·è¾“å…¥æ€»é¢åº¦"></el-input>
                </el-form-item>
                <el-form-item label="çŠ¶æ€">
                    <el-radio-group v-model="formData.status">
                        <el-radio :label="1">å¯ç”¨</el-radio>
                        <el-radio :label="0">ç¦ç”¨</el-radio>
                    </el-radio-group>
                </el-form-item>
            </el-form>
            <template #footer>
                <el-button @click="dialogVisible = false">å–æ¶ˆ</el-button>
                <el-button type="primary" @click="handleSubmit">ç¡®å®š</el-button>
            </template>
        </el-dialog>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/vue@3.3.4/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/element-plus@2.4.4/dist/index.full.js"></script>
    <script>
        const { createApp, ref, reactive, onMounted } = Vue;
        
        createApp({
            setup() {
                const loading = ref(false);
                const dialogVisible = ref(false);
                const dialogTitle = ref('æ–°å¢å€Ÿè´·');
                const pagination = reactive({ page: 1, size: 10, total: 0 });
                const tableData = ref([]);
                const formData = reactive({
                    productName: '', currency: '', minAmount: '', maxAmount: '',
                    annualRate: '', lockDays: '', totalQuota: '', status: 1
                });
                
                const mockData = [
                    { id: 1, productName: 'ç¨³å¥ç†è´¢30å¤©', currency: 'USDT', minAmount: '100', maxAmount: '100,000', annualRate: '8.00', lockDays: 30, totalQuota: '1,000,000', remainQuota: '500,000', status: 1 },
                    { id: 2, productName: 'BTCå¢å€¼è®¡åˆ’60å¤©', currency: 'BTC', minAmount: '0.01', maxAmount: '10', annualRate: '12.00', lockDays: 60, totalQuota: '100', remainQuota: '50', status: 1 },
                    { id: 3, productName: 'ETHé«˜æ”¶ç›Š90å¤©', currency: 'ETH', minAmount: '0.1', maxAmount: '100', annualRate: '15.00', lockDays: 90, totalQuota: '1,000', remainQuota: '800', status: 1 }
                ];
                
                const loadData = () => {
                    loading.value = true;
                    setTimeout(() => {
                        tableData.value = mockData;
                        pagination.total = mockData.length;
                        loading.value = false;
                    }, 500);
                };
                
                const handleAdd = () => {
                    dialogTitle.value = 'æ–°å¢å€Ÿè´·';
                    Object.keys(formData).forEach(key => formData[key] = key === 'status' ? 1 : '');
                    dialogVisible.value = true;
                };
                
                const handleEdit = (row) => {
                    dialogTitle.value = 'ç¼–è¾‘å€Ÿè´·';
                    Object.assign(formData, row);
                    dialogVisible.value = true;
                };

                
                const handleSubmit = () => {
                    ElementPlus.ElMessage.success('ä¿å­˜æˆåŠŸ');
                    dialogVisible.value = false;
                    loadData();
                };
                
                const handleToggleStatus = (row) => {
                    const action = row.status === 1 ? 'ç¦ç”¨' : 'å¯ç”¨';
                    ElementPlus.ElMessageBox.confirm(`ç¡®å®šè¦${action}è¯¥å€Ÿè´·å—ï¼Ÿ`, 'æç¤º', {
                        confirmButtonText: 'ç¡®å®š', cancelButtonText: 'å–æ¶ˆ', type: 'warning'
                    }).then(() => {
                        ElementPlus.ElMessage.success(`${action}æˆåŠŸ`);
                        loadData();
                    }).catch(() => {});
                };
                
                const handleDelete = (row) => {
                    ElementPlus.ElMessageBox.confirm('ç¡®å®šè¦åˆ é™¤è¯¥å€Ÿè´·å—ï¼Ÿ', 'æç¤º', {
                        confirmButtonText: 'ç¡®å®š', cancelButtonText: 'å–æ¶ˆ', type: 'warning'
                    }).then(() => {
                        ElementPlus.ElMessage.success('åˆ é™¤æˆåŠŸ');
                        loadData();
                    }).catch(() => {});
                };
                
                const handleSizeChange = (size) => { pagination.size = size; loadData(); };
                const handleCurrentChange = (page) => { pagination.page = page; loadData(); };
                const goBack = () => { window.location.href = 'dashboard.html'; };
                const logout = () => {
                    localStorage.removeItem('token');
                    localStorage.removeItem('userInfo');
                    window.location.href = 'login.html';
                };
                
                onMounted(() => { loadData(); });
                
                return {
                    loading, dialogVisible, dialogTitle, pagination, tableData, formData,
                    handleAdd, handleEdit, handleSubmit, handleToggleStatus, handleDelete,
                    handleSizeChange, handleCurrentChange, goBack, logout
                };
            }
        }).use(ElementPlus).mount('#app');
    </script>
</body>
</html>
